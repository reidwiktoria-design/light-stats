<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –°–≤—ñ—Ç–ª–∞</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;800&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">

<style>
:root {
    --bg-page: #eef0f2;
    --bg-card: #ffffff;
    --accent-dark: #1a1a1a;
    --accent-blue: #254EDB;
    
    /* === –û–°–ù–û–í–ù–Ü –ö–û–õ–¨–û–†–ò === */
    --color-on: #8DAA91;   /* –ë–∞–∑–æ–≤–∏–π –∑–µ–ª–µ–Ω–∏–π */
    --color-off: #E07A5F;  /* –ë–∞–∑–æ–≤–∏–π —á–µ—Ä–≤–æ–Ω–∏–π */
    
    /* === –ö–û–õ–¨–û–†–ò –î–õ–Ø –°–ü–ò–°–ö–£ (–¢—Ä–æ—Ö–∏ —Ç–µ–º–Ω—ñ—à—ñ, –Ω–∞ ~10%) === */
    --color-row-on: #7E9C82; 
    --color-row-off: #CC6A50;

    /* –§–æ–Ω–∏ —Å—Ç–∞—Ç—É—Å—ñ–≤ */
    --color-on-bg: #E8F5E9;
    --color-off-bg: #FFF3E0;

    --text-main: #111111;
    --text-muted: #888888;
}

body { font-family: 'Space Grotesk', sans-serif; background: var(--bg-page); margin: 0; padding: 20px 10px; color: var(--text-main); }
.page { max-width: 500px; margin: 0 auto; padding-bottom: 40px; }

header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding: 0 4px; }
h1 { font-size: 22px; font-weight: 800; text-transform: uppercase; letter-spacing: -0.5px; margin: 0; }
.sub { font-family: 'JetBrains Mono', monospace; font-size: 11px; font-weight: 700; background: #fff; padding: 4px 8px; border-radius: 6px; border: 1px solid #ddd; color: var(--accent-blue); text-transform: uppercase; }

.status-card { background: #fff; border: 2px solid var(--accent-dark); border-radius: 16px; padding: 20px; margin-bottom: 35px; box-shadow: 4px 4px 0px var(--accent-dark); display: flex; flex-direction: column; align-items: center; text-align: center; transition: all 0.3s; }
.status-card.good { background: var(--color-on-bg); border-color: var(--color-on); box-shadow: 4px 4px 0px var(--color-on); }
.status-card.bad { background: var(--color-off-bg); border-color: var(--color-off); box-shadow: 4px 4px 0px var(--color-off); }
.status-icon { font-size: 13px; font-weight: 800; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 6px; font-family: 'JetBrains Mono', monospace; }
.status-time { font-size: 42px; font-weight: 700; line-height: 1; margin-bottom: 10px; font-variant-numeric: tabular-nums; }
.status-label { font-size: 11px; opacity: 0.7; font-family: 'JetBrains Mono', monospace; }

/* === –ö–ê–†–¢–ö–ê –î–ù–Ø === */
.day-container { 
    background: var(--bg-card); 
    border-radius: 12px; 
    padding: 16px 14px; 
    margin-bottom: 12px; 
    box-shadow: 0 1px 3px rgba(0,0,0,0.02); 
    
    /* –ê–Ω—ñ–º–∞—Ü—ñ—è –±–æ—Ä–¥–µ—Ä–∞ —ñ —Ç—ñ–Ω—ñ */
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    
    cursor: pointer; 
    overflow: hidden;
    position: relative;
    
    /* –ü—Ä–æ–∑–æ—Ä–∏–π –±–æ—Ä–¥–µ—Ä –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º, —â–æ–± –Ω–µ —Å—Ç—Ä–∏–±–∞–ª–æ */
    border: 2px solid transparent; 
}

/* –ï—Ñ–µ–∫—Ç –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è */
.day-container:active { transform: scale(0.99); }

/* –°—Ç–∏–ª—å –°–¨–û–ì–û–î–ù–Ü (—è–∫—â–æ –Ω–µ —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–æ) */
.day-container.today { 
    border-color: #254EDB; /* –õ–µ–≥–∫–∏–π —Å–∏–Ω—ñ–π */
    background: linear-gradient(to bottom right, #ffffff, #f8faff);
}

/* === –†–û–ó–ì–û–†–ù–£–¢–ò–ô –°–¢–ê–ù (–°–ò–ù–Ø –†–ê–ú–ö–ê) === */
.day-container.expanded {
    border-color: var(--accent-blue); /* –Ø—Å–∫—Ä–∞–≤–∞ —Å–∏–Ω—è —Ä–∞–º–∫–∞ */
    box-shadow: 0 10px 30px rgba(37, 78, 219, 0.15); /* –ë—ñ–ª—å—à–∞ —Ç—ñ–Ω—å */
    background: #fff;
    z-index: 10;
}

/* –Ü–¥–µ–∞–ª—å–Ω–∏–π –¥–µ–Ω—å */
.day-container.perfect { border-color: var(--color-on); }
.day-container.perfect.expanded { border-color: var(--color-on); } /* –ó–µ–ª–µ–Ω–∞ —Ä–∞–º–∫–∞ —è–∫—â–æ —ñ–¥–µ–∞–ª—å–Ω–∏–π */

.day-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; padding: 0 2px; }
.day-date-group { display: flex; align-items: center; gap: 10px; }
.day-date { font-size: 17px; font-weight: 700; color: var(--accent-blue); }
.day-name { font-size: 14px; color: var(--text-muted); font-weight: 500; }
.today-badge { font-size: 10px; font-weight: 800; background: var(--accent-blue); color: #fff; padding: 3px 6px; border-radius: 4px; text-transform: uppercase; line-height: 1; }

/* TIMELINE */
.timeline { height: 24px; display: flex; border-radius: 6px; overflow: hidden; background: #eef0f2; margin-bottom: 4px; position: relative; }
.segment { height: 100%; position: relative; cursor: pointer; transition: all 0.2s ease; }
.segment:hover { filter: brightness(1.1); transform: scaleY(1.05); z-index: 2; }

.on { background: var(--color-on); }
.off { background: var(--color-off); }
.future { background: repeating-linear-gradient(45deg, #e0e0e0, #e0e0e0 4px, #f2f2f2 4px, #f2f2f2 8px); opacity: 0.4; cursor: default; pointer-events: none; }

.now-marker { position: absolute; top: 0; bottom: 0; width: 2px; background: var(--accent-blue); z-index: 20; pointer-events: none; box-shadow: 0 0 4px rgba(37, 78, 219, 0.5); }

.scale { display: flex; justify-content: space-between; font-family: 'JetBrains Mono', monospace; font-size: 10px; color: #aaa; margin-bottom: 12px; padding: 0 2px; }
.day-summary { display: flex; justify-content: space-between; font-family: 'JetBrains Mono', monospace; font-size: 11px; color: var(--text-main); padding-top: 8px; border-top: 1px solid #f0f0f0; }
.sum-item { display: flex; align-items: baseline; gap: 6px; }
.label-on { color: var(--color-on); font-weight: 800; font-size: 10px; text-transform: uppercase; }
.label-off { color: var(--color-off); font-weight: 800; font-size: 10px; text-transform: uppercase; }
.day-summary b { color: var(--text-main); font-size: 12px; font-weight: 700; }

/* === –ê–ù–Ü–ú–ê–¶–Ü–Ø –°–ü–ò–°–ö–£ === */
.day-details {
    max-height: 0;
    opacity: 0;
    overflow: hidden;
    margin-top: 0;
    
    /* BOUNCE */
    transition: 
        max-height 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275), 
        opacity 0.4s ease,
        margin-top 0.4s ease;
}

.day-container.expanded .day-details {
    max-height: 600px; 
    opacity: 1;
    margin-top: 15px;
    padding-top: 5px;
    /* –¢—É—Ç –ø—Ä–∏–±—Ä–∞–Ω–æ –±–æ—Ä–¥–µ—Ä, –±–æ —Ç–µ–ø–µ—Ä –±–æ—Ä–¥–µ—Ä –Ω–∞ —Å–∞–º—ñ–π –∫–∞—Ä—Ç—Ü—ñ */
}

/* –†—è–¥–∫–∏ —Å–ø–∏—Å–∫—É */
.detail-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 12px;
    margin-bottom: 6px;
    border-radius: 6px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: #fff;
    font-weight: 500;
}
.detail-row:last-child { margin-bottom: 0; }

/* –¢—ñ –∂ –∫–æ–ª—å–æ—Ä–∏, –∞–ª–µ —Ç—Ä–æ—Ö–∏ —Ç–µ–º–Ω—ñ—à—ñ –¥–ª—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç—É —Ç–µ–∫—Å—Ç—É */
.row-on { background: var(--color-row-on); }
.row-off { background: var(--color-row-off); }

.chevron {
    font-size: 10px;
    transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    color: #ccc;
    margin-left: 6px;
    display: inline-block;
}
.day-container.expanded .chevron { transform: rotate(180deg); color: var(--accent-blue); }

.week-separator { display: flex; align-items: center; color: var(--text-muted); font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; margin: 30px 0 15px; opacity: 0.5; }
.week-separator::before, .week-separator::after { content: ''; flex: 1; height: 1px; background: #ccc; }
.week-separator span { padding: 0 10px; }

#tooltip { position: absolute; background: var(--accent-dark); color: #fff; padding: 5px 8px; font-family: 'JetBrains Mono', monospace; font-size: 10px; border-radius: 4px; pointer-events: none; opacity: 0; transform: translateY(4px); transition: 0.1s; z-index: 100; white-space: nowrap; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
#tooltip.visible { opacity: 1; transform: translateY(0); }
footer { margin-top: 40px; text-align: center; font-family: 'JetBrains Mono', monospace; font-size: 10px; color: #aaa; }
</style>
</head>
<body>

<div class="page">
    <div id="tooltip"></div>
    <header>
        <h1>–ú–û–ù–Ü–¢–û–†–ò–ù–ì –°–í–Ü–¢–õ–ê</h1>
        <div class="sub" id="currentMonth">...</div>
    </header>
    <div id="statusCard" class="status-card">
        <div class="status-icon" id="statusIcon">...</div>
        <div class="status-time" id="statusTimer">00:00</div>
        <div class="status-label" id="statusLabel">...</div>
    </div>
    <div id="daysWrapper"></div>
    <footer id="footerStats"></footer>
</div>

<script id="data-logs" type="text/plain">
üåë 13.01.26, 01:25 –°–≤—ñ—Ç–ª–æ –∑–Ω–∏–∫–ª–æ
-----------------------------------------
üåë 13.01.26, 23:37 –£–≤—ñ–º–∫–Ω—É–ª–∏ —Å–≤—ñ—Ç–ª–æ 
‚è≥ –ô–æ–≥–æ –Ω–µ –±—É–ª–æ 22 –≥–æ–¥–∏–Ω–∏ —ñ 12 —Ö–≤–∏–ª–∏–Ω
-----------------------------------------
üåë 14.01.26, 08:00 –°–≤—ñ—Ç–ª–æ –∑–Ω–∏–∫–ª–æ
‚è≥ –í–æ–Ω–æ –±—É–ª–æ 8 –≥–æ–¥–∏–Ω —ñ 23 —Ö–≤–∏–ª–∏–Ω–∏ 
-----------------------------------------
üåï 14.01.26, 14:33 –£–≤—ñ–º–∫–Ω—É–ª–∏ —Å–≤—ñ—Ç–ª–æ 
‚è≥ –ô–æ–≥–æ –Ω–µ –±—É–ª–æ 6 –≥–æ–¥–∏–Ω —ñ 33 —Ö–≤–∏–ª–∏–Ω–∏
-----------------------------------------
üåë 14.01.26, 20:24 –°–≤—ñ—Ç–ª–æ –∑–Ω–∏–∫–ª–æ
‚è≥ –í–æ–Ω–æ –±—É–ª–æ 5 –≥–æ–¥–∏–Ω —ñ 51 —Ö–≤–∏–ª–∏–Ω–∞
-----------------------------------------
üåï 15.01.26, 06:50 –£–≤—ñ–º–∫–Ω—É–ª–∏ —Å–≤—ñ—Ç–ª–æ 
‚è≥ –ô–æ–≥–æ –Ω–µ –±—É–ª–æ 10 –≥–æ–¥–∏–Ω —ñ 26 —Ö–≤–∏–ª–∏–Ω
-----------------------------------------
üåë 15.01.26, 10:54 –°–≤—ñ—Ç–ª–æ –∑–Ω–∏–∫–ª–æ
‚è≥ –í–æ–Ω–æ –±—É–ª–æ 3 –≥–æ–¥–∏–Ω–∏ —ñ 52 —Ö–≤–∏–ª–∏–Ω–∏ 
-----------------------------------------
üåï 15.01.26, 22:12 –£–≤—ñ–º–∫–Ω—É–ª–∏ —Å–≤—ñ—Ç–ª–æ 
‚è≥ –ô–æ–≥–æ –Ω–µ –±—É–ª–æ 11 –≥–æ–¥–∏–Ω —ñ 18 —Ö–≤–∏–ª–∏–Ω
-----------------------------------------
üåë 16.01.26, 06:04 –°–≤—ñ—Ç–ª–æ –∑–Ω–∏–∫–ª–æ
‚è≥ –í–æ–Ω–æ –±—É–ª–æ 7 –≥–æ–¥–∏–Ω —ñ 52 —Ö–≤–∏–ª–∏–Ω–∏
-----------------------------------------
üåï 16.01.26, 13:23 –£–≤—ñ–º–∫–Ω—É–ª–∏ —Å–≤—ñ—Ç–ª–æ 
‚è≥ –ô–æ–≥–æ –Ω–µ –±—É–ª–æ 7 –≥–æ–¥–∏–Ω —ñ 19 —Ö–≤–∏–ª–∏–Ω
-----------------------------------------
üåë 16.01.26, 21:12 –°–≤—ñ—Ç–ª–æ –∑–Ω–∏–∫–ª–æ
‚è≥ –í–æ–Ω–æ –±—É–ª–æ 7 –≥–æ–¥–∏–Ω —ñ 49 —Ö–≤–∏–ª–∏–Ω 
-----------------------------------------
üåï 17.01.26, 10:44 –£–≤—ñ–º–∫–Ω—É–ª–∏ —Å–≤—ñ—Ç–ª–æ 
‚è≥ –ô–æ–≥–æ –Ω–µ –±—É–ª–æ 13 –≥–æ–¥–∏–Ω —ñ 32 —Ö–≤–∏–ª–∏–Ω–∏
-----------------------------------------
üåë 17.01.26, 16:10 –°–≤—ñ—Ç–ª–æ –∑–Ω–∏–∫–ª–æ
‚è≥ –í–æ–Ω–æ –±—É–ª–æ 5 –≥–æ–¥–∏–Ω —ñ 26 —Ö–≤–∏–ª–∏–Ω
-----------------------------------------
üåï 17.01.26, 23:46 –£–≤—ñ–º–∫–Ω—É–ª–∏ —Å–≤—ñ—Ç–ª–æ 
‚è≥ –ô–æ–≥–æ –Ω–µ –±—É–ª–æ 7 –≥–æ–¥–∏–Ω —ñ 36 —Ö–≤–∏–ª–∏–Ω
-----------------------------------------
üåë 18.01.26, 12:26 –°–≤—ñ—Ç–ª–æ –∑–Ω–∏–∫–ª–æ
‚è≥ –í–æ–Ω–æ –±—É–ª–æ 12 –≥–æ–¥–∏–Ω —ñ 39 —Ö–≤–∏–ª–∏–Ω
-----------------------------------------
üåï 18.01.26, 21:43 –£–≤—ñ–º–∫–Ω—É–ª–∏ —Å–≤—ñ—Ç–ª–æ 
‚è≥ –ô–æ–≥–æ –Ω–µ –±—É–ª–æ 9 –≥–æ–¥–∏–Ω —ñ 17 —Ö–≤–∏–ª–∏–Ω
-----------------------------------------
üåë 19.01.26, 14:55 –°–≤—ñ—Ç–ª–æ –∑–Ω–∏–∫–ª–æ
‚è≥ –í–æ–Ω–æ –±—É–ª–æ 16 –≥–æ–¥–∏–Ω —ñ 56 —Ö–≤–∏–ª–∏–Ω
-----------------------------------------
üåï 19.01.26, 22:43 –£–≤—ñ–º–∫–Ω—É–ª–∏ —Å–≤—ñ—Ç–ª–æ 
‚è≥ –ô–æ–≥–æ –Ω–µ –±—É–ª–æ 7 –≥–æ–¥–∏–Ω —ñ 48 —Ö–≤–∏–ª–∏–Ω
-----------------------------------------
üåë 20.01.26, 06:37 –°–≤—ñ—Ç–ª–æ –∑–Ω–∏–∫–ª–æ
‚è≥ –í–æ–Ω–æ –±—É–ª–æ 7 –≥–æ–¥–∏–Ω —ñ 54 —Ö–≤–∏–ª–∏–Ω–∏
-----------------------------------------
üåï 20.01.26, 18:12 –£–≤—ñ–º–∫–Ω—É–ª–∏ —Å–≤—ñ—Ç–ª–æ 
‚è≥ –ô–æ–≥–æ –Ω–µ –±—É–ª–æ 11 –≥–æ–¥–∏–Ω —ñ 35 —Ö–≤–∏–ª–∏–Ω
-----------------------------------------
üåë 20.01.26, 19:02 –°–≤—ñ—Ç–ª–æ –∑–Ω–∏–∫–ª–æ
‚è≥ –í–æ–Ω–æ –±—É–ª–æ 50 —Ö–≤–∏–ª–∏–Ω
-----------------------------------------
üåï 20.01.26, 21:22 –£–≤—ñ–º–∫–Ω—É–ª–∏ —Å–≤—ñ—Ç–ª–æ 
‚è≥ –ô–æ–≥–æ –Ω–µ –±—É–ª–æ 2 –≥–æ–¥–∏–Ω–∏ —ñ 20 —Ö–≤–∏–ª–∏–Ω
-----------------------------------------
üåë 21.01.2026, 00:37 –°–≤—ñ—Ç–ª–æ –∑–Ω–∏–∫–ª–æ
‚è≥ –í–æ–Ω–æ –±—É–ª–æ 3 –≥–æ–¥–∏–Ω–∏, 13 —Ö–≤–∏–ª–∏–Ω
-----------------------------------------
üåï 21.01.26, 16:32 –£–≤—ñ–º–∫–Ω—É–ª–∏ —Å–≤—ñ—Ç–ª–æ 
‚è≥ –ô–æ–≥–æ –Ω–µ –±—É–ª–æ 15 –≥–æ–¥–∏–Ω —ñ 55 —Ö–≤–∏–ª–∏–Ω
-----------------------------------------
üåë 21.01.26, 20:13 –°–≤—ñ—Ç–ª–æ –∑–Ω–∏–∫–ª–æ
‚è≥ –í–æ–Ω–æ –±—É–ª–æ 3 –≥–æ–¥–∏–Ω–∏ —ñ 41 —Ö–≤–∏–ª–∏–Ω–∞
-----------------------------------------
üåï 22.01.26, 02:15 –£–≤—ñ–º–∫–Ω—É–ª–∏ —Å–≤—ñ—Ç–ª–æ 
‚è≥ –ô–æ–≥–æ –Ω–µ –±—É–ª–æ 6 –≥–æ–¥–∏–Ω —ñ 2 —Ö–≤–∏–ª–∏–Ω–∏
-----------------------------------------
üåë 22.01.26, 07:07 –°–≤—ñ—Ç–ª–æ –∑–Ω–∏–∫–ª–æ
‚è≥ –í–æ–Ω–æ –±—É–ª–æ 4 –≥–æ–¥–∏–Ω–∏ —ñ 52 —Ö–≤–∏–ª–∏–Ω–∏
-----------------------------------------
üåï 22.01.26, 14:38 –£–≤—ñ–º–∫–Ω—É–ª–∏ —Å–≤—ñ—Ç–ª–æ 
‚è≥ –ô–æ–≥–æ –Ω–µ –±—É–ª–æ 7 –≥–æ–¥–∏–Ω —ñ 31 —Ö–≤–∏–ª–∏–Ω–∞
-----------------------------------------
üåë 22.01.26, 19:36 –°–≤—ñ—Ç–ª–æ –∑–Ω–∏–∫–ª–æ
‚è≥ –í–æ–Ω–æ –±—É–ª–æ 4 –≥–æ–¥–∏–Ω–∏ —ñ 58 —Ö–≤–∏–ª–∏–Ω
-----------------------------------------
üåï 22.01.26, 23:27 –£–≤—ñ–º–∫–Ω—É–ª–∏ —Å–≤—ñ—Ç–ª–æ 
‚è≥ –ô–æ–≥–æ –Ω–µ –±—É–ª–æ 3 –≥–æ–¥–∏–Ω–∏ —ñ 51 —Ö–≤–∏–ª–∏–Ω–∞
-----------------------------------------
üåë 23.01.26, 09:26 –°–≤—ñ—Ç–ª–æ –∑–Ω–∏–∫–ª–æ
‚è≥ –í–æ–Ω–æ –±—É–ª–æ 9 –≥–æ–¥–∏–Ω —ñ 59 —Ö–≤–∏–ª–∏–Ω
-----------------------------------------
üåï 23.01.26, 15:22 –£–≤—ñ–º–∫–Ω—É–ª–∏ —Å–≤—ñ—Ç–ª–æ 
‚è≥ –ô–æ–≥–æ –Ω–µ –±—É–ª–æ 5 –≥–æ–¥–∏–Ω —ñ 56 —Ö–≤–∏–ª–∏–Ω
-----------------------------------------
üåë 23.01.26, 19:30 –°–≤—ñ—Ç–ª–æ –∑–Ω–∏–∫–ª–æ
‚è≥ –í–æ–Ω–æ –±—É–ª–æ 4 –≥–æ–¥–∏–Ω–∏ —ñ 8 —Ö–≤–∏–ª–∏–Ω
-----------------------------------------
üåï 24.01.26, 01:07 –£–≤—ñ–º–∫–Ω—É–ª–∏ —Å–≤—ñ—Ç–ª–æ 
‚è≥ –ô–æ–≥–æ –Ω–µ –±—É–ª–æ 5 –≥–æ–¥–∏–Ω —ñ 37 —Ö–≤–∏–ª–∏–Ω
-----------------------------------------
üåë 24.01.26, 09:38 –°–≤—ñ—Ç–ª–æ –∑–Ω–∏–∫–ª–æ
‚è≥ –í–æ–Ω–æ –±—É–ª–æ 8 –≥–æ–¥–∏–Ω —ñ 31 —Ö–≤–∏–ª–∏–Ω–∞
-----------------------------------------
üåï 24.01.26, 11:26 –£–≤—ñ–º–∫–Ω—É–ª–∏ —Å–≤—ñ—Ç–ª–æ 
‚è≥ –ô–æ–≥–æ –Ω–µ –±—É–ª–æ 1 –≥–æ–¥–∏–Ω—É —ñ 48 —Ö–≤–∏–ª–∏–Ω
-----------------------------------------
 24.01.26, 15:07 –°–≤—ñ—Ç–ª–æ –∑–Ω–∏–∫–ª–æ
‚è≥ –í–æ–Ω–æ –±—É–ª–æ 3 –≥–æ–¥–∏–Ω–∏ —ñ 41 —Ö–≤–∏–ª–∏–Ω–∞
-----------------------------------------
</script>
<script>
    function parseLogs() {
        const rawText = document.getElementById('data-logs').textContent;
        const lines = rawText.split('\n');
        const events = [];

        lines.forEach(line => {
            const isTurnedOn = line.toLowerCase().includes('—É–≤—ñ–º–∫–Ω—É–ª–∏') || line.toLowerCase().includes('—Å–≤—ñ—Ç–ª–æ —î');
            const isTurnedOff = line.toLowerCase().includes('–∑–Ω–∏–∫–ª–æ') || line.toLowerCase().includes('–Ω–µ–º–∞—î');
            if (!isTurnedOn && !isTurnedOff) return;

            const dateMatch = line.match(/(\d{2}\.\d{2}\.\d{2,4})/);
            const timeMatch = line.match(/(\d{2}:\d{2})/);

            if (dateMatch && timeMatch) {
                let dateStr = dateMatch[1];
                let timeStr = timeMatch[1];
                const dParts = dateStr.split('.');
                let year = dParts[2].length === 2 ? '20' + dParts[2] : dParts[2];
                const dateObj = new Date(`${year}-${dParts[1]}-${dParts[0]}T${timeStr}:00`);
                
                events.push({
                    date: dateObj,
                    type: isTurnedOn ? 'ON' : 'OFF',
                    rawTime: timeStr
                });
            }
        });
        events.sort((a, b) => a.date - b.date);
        return events;
    }

    function generateDays(events) {
        if (events.length === 0) return [];
        const days = {}; 
        const now = new Date(); 

        let currentDate = new Date(events[0].date);
        currentDate.setHours(0,0,0,0);
        let currentState = events[0].type === 'OFF' ? 'ON' : 'OFF';
        let eventIndex = 0;
        
        const endLoopDate = new Date();
        endLoopDate.setHours(23,59,59,999);

        while (currentDate <= endLoopDate) {
            const dayKey = currentDate.toISOString().split('T')[0];
            const dayStart = new Date(currentDate);
            const dayEnd = new Date(currentDate); dayEnd.setHours(23,59,59,999);
            
            days[dayKey] = { date: new Date(dayStart), segments: [], totalOn: 0, totalOff: 0 };
            let pointer = dayStart.getTime();
            const endOfDay = dayEnd.getTime();

            while (eventIndex < events.length) {
                const ev = events[eventIndex];
                if (ev.date >= dayEnd) break; 
                if (ev.date.getTime() > pointer) {
                    addSegment(days[dayKey], pointer, ev.date.getTime(), currentState);
                }
                currentState = ev.type;
                pointer = ev.date.getTime();
                eventIndex++;
            }

            const isToday = dayStart.toDateString() === now.toDateString();
            if (isToday) {
                if (now.getTime() > pointer) {
                    let activeLabel = currentState === 'ON' ? '–°–í–Ü–¢–õ–û –Ñ' : '–°–í–Ü–¢–õ–ê –ù–ï–ú–ê–Ñ';
                    addSegment(days[dayKey], pointer, now.getTime(), currentState, activeLabel);
                    pointer = now.getTime();
                }
                addSegment(days[dayKey], pointer, endOfDay, 'FUTURE');
            } else {
                addSegment(days[dayKey], pointer, endOfDay, currentState);
            }
            currentDate.setDate(currentDate.getDate() + 1);
        }
        return Object.values(days);
    }

    function addSegment(dayObj, startMs, endMs, type, customStatus = null) {
        if (startMs >= endMs) return;
        const diffMs = endMs - startMs;
        const minutes = Math.floor(diffMs / 60000);
        const width = (minutes / 1440) * 100;
        const startD = new Date(startMs);
        const endD = new Date(endMs);
        
        let statusLabel = customStatus;
        if (!statusLabel) {
            statusLabel = type === 'ON' ? '–ë–£–õ–û' : '–ù–ï –ë–£–õ–û';
        }

        const percent = Math.round((minutes / 1440) * 100);

        dayObj.segments.push({
            type: type,
            width: width,
            range: formatTime(startD) + ' - ' + formatTime(endD),
            dur: formatDuration(minutes),
            percentStr: percent > 0 ? `(${percent}%)` : '',
            statusLabel: statusLabel 
        });

        if (type === 'ON') dayObj.totalOn += minutes;
        if (type === 'OFF') dayObj.totalOff += minutes;
    }

    function updateStatus(events) {
        if (!events || events.length === 0) return;
        const now = new Date();
        const lastEvent = events[events.length - 1];
        
        const card = document.getElementById('statusCard');
        const icon = document.getElementById('statusIcon');
        const timer = document.getElementById('statusTimer');
        const label = document.getElementById('statusLabel');
        
        const diffMs = now - lastEvent.date;
        const diffMins = Math.floor(diffMs / 60000);
        
        const isLightOn = lastEvent.type === 'ON';
        const eventDateStr = lastEvent.date.toLocaleDateString('uk-UA', {day:'2-digit', month:'2-digit', year:'numeric'});
        
        const h = Math.floor(diffMins / 60);
        const m = diffMins % 60;
        const timeString = `${h}–≥ ${m}—Ö–≤`;

        if (isLightOn) {
            card.className = 'status-card good';
            icon.innerText = '‚óè –°–í–Ü–¢–õ–û –Ñ';
            timer.innerText = timeString;
            label.innerText = `–£–≤—ñ–º–∫–Ω—É–ª–∏: ${eventDateStr}, ${lastEvent.rawTime}`;
        } else {
            card.className = 'status-card bad';
            icon.innerText = '‚óè –°–í–Ü–¢–õ–ê –ù–ï–ú–ê–Ñ';
            timer.innerText = timeString;
            label.innerText = `–ó–Ω–∏–∫–ª–æ: ${eventDateStr}, ${lastEvent.rawTime}`;
        }
    }

    function toggleDay(element) {
        const allDays = document.querySelectorAll('.day-container');
        const isAlreadyExpanded = element.classList.contains('expanded');
        allDays.forEach(day => {
            day.classList.remove('expanded');
        });
        if (!isAlreadyExpanded) {
            element.classList.add('expanded');
        }
    }

    function render() {
        const events = parseLogs();
        let dayData = generateDays(events);
        dayData.reverse();

        const wrapper = document.getElementById('daysWrapper');
        const now = new Date();
        const monthNames = ["–°–Ü–ß–ï–ù–¨", "–õ–Æ–¢–ò–ô", "–ë–ï–†–ï–ó–ï–ù–¨", "–ö–í–Ü–¢–ï–ù–¨", "–¢–†–ê–í–ï–ù–¨", "–ß–ï–†–í–ï–ù–¨", "–õ–ò–ü–ï–ù–¨", "–°–ï–†–ü–ï–ù–¨", "–í–ï–†–ï–°–ï–ù–¨", "–ñ–û–í–¢–ï–ù–¨", "–õ–ò–°–¢–û–ü–ê–î", "–ì–†–£–î–ï–ù–¨"];
        document.getElementById('currentMonth').innerText = `${monthNames[now.getMonth()]} ${now.getFullYear()}`;

        updateStatus(events);
        if (window.statusInterval) clearInterval(window.statusInterval);
        window.statusInterval = setInterval(() => updateStatus(events), 60000);

        let html = '';
        const dayNames = ["–ù–µ–¥—ñ–ª—è", "–ü–æ–Ω–µ–¥—ñ–ª–æ–∫", "–í—ñ–≤—Ç–æ—Ä–æ–∫", "–°–µ—Ä–µ–¥–∞", "–ß–µ—Ç–≤–µ—Ä", "–ü'—è—Ç–Ω–∏—Ü—è", "–°—É–±–æ—Ç–∞"];

        dayData.forEach((day, index) => {
            const isToday = day.date.toDateString() === now.toDateString();
            
            if (day.date.getDay() === 0 && index !== 0) {
                 html += '<div class="week-separator"><span>–ú–∏–Ω—É–ª–∏–π —Ç–∏–∂–¥–µ–Ω—å</span></div>';
            }

            const dateStr = formatDDMM(day.date);
            const dayName = dayNames[day.date.getDay()];
            
            let containerClass = 'day-container';
            if (isToday) containerClass += ' today';
            else containerClass += ' past';
            
            if (day.totalOff === 0) containerClass += ' perfect';

            let todayBadgeHtml = isToday ? '<span class="today-badge">–°–¨–û–ì–û–î–ù–Ü</span>' : '';
            let chevronHtml = '<span class="chevron">‚ñº</span>';

            let segmentsHtml = '';
            let detailsHtml = '<div class="day-details">';

            if (isToday) {
                const nowMinutes = now.getHours() * 60 + now.getMinutes();
                const nowPercent = (nowMinutes / 1440) * 100;
                segmentsHtml += `<div class="now-marker" style="left:${nowPercent}%;"></div>`;
            }
            
            day.segments.forEach(seg => {
                let colorClass = 'future';
                let dataAttrs = '';
                
                if (seg.type === 'ON') { 
                    colorClass = 'on'; 
                    dataAttrs = `data-status="${seg.statusLabel}" data-range="${seg.range}" data-dur="${seg.dur}"`;
                    detailsHtml += `<div class="detail-row row-on"><span>${seg.range}</span><span>${seg.dur} ${seg.percentStr}</span></div>`;
                } else if (seg.type === 'OFF') {
                    colorClass = 'off';
                    dataAttrs = `data-status="${seg.statusLabel}" data-range="${seg.range}" data-dur="${seg.dur}"`;
                    detailsHtml += `<div class="detail-row row-off"><span>${seg.range}</span><span>${seg.dur} ${seg.percentStr}</span></div>`;
                }
                
                segmentsHtml += `<div class="segment ${colorClass}" style="width:${seg.width}%;" ${dataAttrs}></div>`;
            });
            
            detailsHtml += '</div>';

            html += `
            <div class="${containerClass}" onclick="toggleDay(this)">
                <div class="day-header">
                    <div class="day-date-group">
                        <div class="day-date">${dateStr}</div>
                        ${todayBadgeHtml}
                    </div>
                    <div class="day-name">${dayName} ${chevronHtml}</div>
                </div>
                
                <div class="timeline">
                    ${segmentsHtml}
                </div>
                
                <div class="scale"><span>00:00</span><span>12:00</span><span>24:00</span></div>
                
                <div class="day-summary">
                    <div class="sum-item"><span class="label-on">–ë–£–õ–û:</span> <b>${day.totalOn > 0 ? formatShort(day.totalOn) : '-'}</b></div>
                    <div class="sum-item"><span class="label-off">–ù–ï –ë–£–õ–û:</span> <b>${day.totalOff > 0 ? formatShort(day.totalOff) : '-'}</b></div>
                </div>

                ${detailsHtml}
            </div>
            `;
        });

        wrapper.innerHTML = html;
        const nowStr = formatDDMM(now) + ' ' + formatTime(now);
        document.getElementById('footerStats').innerHTML = `–û–Ω–æ–≤–ª–µ–Ω–æ: ${nowStr}`;
        attachTooltips();
    }

    function formatTime(date) { return date.toLocaleTimeString('uk-UA', {hour: '2-digit', minute:'2-digit'}); }
    function formatDDMM(date) { return `${String(date.getDate()).padStart(2,'0')}.${String(date.getMonth()+1).padStart(2,'0')}`; }
    function formatDuration(m) {
        const h = Math.floor(m / 60);
        const mins = m % 60;
        return h === 0 ? `${mins}—Ö–≤` : `${h}–≥ ${mins}—Ö–≤`;
    }
    function formatShort(m) {
        const h = Math.floor(m / 60);
        const mins = m % 60;
        if (h===0) return `${mins}—Ö–≤`;
        return `${h}–≥ ${mins}—Ö–≤`;
    }

    function attachTooltips() {
        const segments = document.querySelectorAll('.segment');
        const tooltip = document.getElementById('tooltip');
        const page = document.querySelector('.page');
        let timeout;

        segments.forEach(seg => {
            if (seg.classList.contains('future')) return;
            seg.addEventListener('click', (e) => {
                e.stopPropagation(); 
                const status = seg.getAttribute('data-status');
                const range = seg.getAttribute('data-range');
                const dur = seg.getAttribute('data-dur');
                tooltip.innerHTML = `<strong>${status}</strong><br>${range}<br>${dur}`;
                const rect = seg.getBoundingClientRect();
                const pageRect = page.getBoundingClientRect();
                let left = (rect.left + rect.width / 2) - pageRect.left;
                let top = (rect.top - pageRect.top) - 45;
                if (left < 60) left = 60; 
                if (left > pageRect.width - 60) left = pageRect.width - 60;
                tooltip.style.left = left + 'px';
                tooltip.style.top = top + 'px';
                tooltip.style.transform = 'translate(-50%, 0)';
                tooltip.classList.add('visible');
                clearTimeout(timeout);
                timeout = setTimeout(() => { tooltip.classList.remove('visible'); }, 3000);
            });
        });
    }
    document.addEventListener('click', () => { const t = document.getElementById('tooltip'); if(t) t.classList.remove('visible'); });

    render();
</script>
</body>
</html>
